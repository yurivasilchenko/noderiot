<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <title>noderiot</title>
</head>

<body>
    <div class="wrapper">
        <div class="search_box">
            <div class="dropdown">
                <div id="serverName"" class=" default_option">EUN</div>
                <ul>
                    <li>EUN</li>
                    <li>EUW</li>
                    <li>NA</li>
                </ul>
            </div>
            <div class="search_field">
                <input type="text" id="summonerNameInput" class="input" placeholder="Enter Summoner Name">
                <i id="searchButton" class="fas fa-search"></i>
            </div>
        </div>
    </div>

    <div id="main-data"></div>

    <script>
        $(document).ready(function () {
            // Show dropdown when default option is clicked
            $(".default_option").click(function (event) {
                event.stopPropagation(); // Prevent event bubbling
                $(".dropdown ul").addClass("active");
            });

            // Update default option text and hide dropdown when an option is selected
            $(".dropdown ul li").click(function () {
                var text = $(this).text();
                $(".default_option").text(text);
                $(".dropdown ul").removeClass("active");
            });

            // Hide dropdown when clicking outside of it
            $(document).click(function (event) {
                var target = $(event.target);
                if (!target.closest('.dropdown').length) {
                    $(".dropdown ul").removeClass("active");
                }
            });
        });

        document.addEventListener("DOMContentLoaded", function () {
            // Get the search button element by its ID
            var searchButton = document.getElementById("searchButton");

            // Add a click event listener to the search button
            searchButton.addEventListener("click", function () {
                let serverName = document.getElementById("serverName").innerText
                let summonerName = document.getElementById("summonerNameInput").value;
                let url = `http://localhost:3000/profile/${serverName}/${summonerName}/`;

                console.log(url, "url")

                fetch(url, { headers: { 'X_REQUESTED_WITH': 'XMLHttpRequest' } })
                    .then((response) => {
                        console.log(response);
                        return response.json();
                    })
                    .then((data) => {
                        console.log(data, "data");
                        document.getElementById("main-data").innerText = JSON.stringify(data);
                    });
            });
        });

    </script>
</body>

</html>